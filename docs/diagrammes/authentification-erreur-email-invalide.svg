<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="680px" preserveAspectRatio="none" style="width:872px;height:680px;background:#FFFFFF;" version="1.1" viewBox="0 0 872 680" width="872px" zoomAndPan="magnify"><defs><filter height="300%" id="f4d6na63q1j55" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="559" x="153" y="43.3486">Erreur d'email sur la Première Connexion du Jeune Milo au CEJ</text><rect fill="#FFFFFF" filter="url(#f4d6na63q1j55)" height="300.5938" style="stroke:#000000;stroke-width:2.0;" width="845" x="10" y="278.5547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="137.8906" y2="596.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="289" x2="289" y1="137.8906" y2="596.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="458" x2="458" y1="137.8906" y2="596.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="676.5" x2="676.5" y1="137.8906" y2="596.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="773.5" x2="773.5" y1="137.8906" y2="596.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="123" y="134.5889">Conseiller ML</text><ellipse cx="171.5" cy="64.5938" fill="#FEFECE" filter="url(#f4d6na63q1j55)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M171.5,72.5938 L171.5,99.5938 M158.5,80.5938 L184.5,80.5938 M171.5,99.5938 L158.5,114.5938 M171.5,99.5938 L184.5,114.5938 " fill="none" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="123" y="608.1436">Conseiller ML</text><ellipse cx="171.5" cy="621.4453" fill="#FEFECE" filter="url(#f4d6na63q1j55)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M171.5,629.4453 L171.5,656.4453 M158.5,637.4453 L184.5,637.4453 M171.5,656.4453 L158.5,671.4453 M171.5,656.4453 L184.5,671.4453 " fill="none" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#CBC3E3" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="114" x="230" y="102.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="237" y="122.5889">Keycloak i-Milo</text><rect fill="#CBC3E3" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="114" x="230" y="595.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="237" y="615.1436">Keycloak i-Milo</text><rect fill="#ADD8E6" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="438" y="102.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="445" y="122.5889">CEJ</text><rect fill="#ADD8E6" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="438" y="595.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="445" y="615.1436">CEJ</text><rect fill="#ADD8E6" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="101" x="624.5" y="102.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="631.5" y="122.5889">Keycloak CEJ</text><rect fill="#ADD8E6" filter="url(#f4d6na63q1j55)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="101" x="624.5" y="595.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="631.5" y="615.1436">Keycloak CEJ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="739.5" y="134.5889">Jeune ML</text><ellipse cx="773.5" cy="64.5938" fill="#FEFECE" filter="url(#f4d6na63q1j55)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M773.5,72.5938 L773.5,99.5938 M760.5,80.5938 L786.5,80.5938 M773.5,99.5938 L760.5,114.5938 M773.5,99.5938 L786.5,114.5938 " fill="none" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="739.5" y="608.1436">Jeune ML</text><ellipse cx="773.5" cy="621.4453" fill="#FEFECE" filter="url(#f4d6na63q1j55)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M773.5,629.4453 L773.5,656.4453 M760.5,637.4453 L786.5,637.4453 M773.5,656.4453 L760.5,671.4453 M773.5,656.4453 L786.5,671.4453 " fill="none" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M300,152.8906 L300,207.8906 L611,207.8906 L611,162.8906 L601,152.8906 L300,152.8906 " fill="#FBFB77" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M601,152.8906 L601,162.8906 L611,162.8906 L601,152.8906 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="306" y="169.9575">Le conseiller a créé le compte du Jeune</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="306" y="185.0903">avec un premier email. Celui-ci est enregistré</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="306" y="200.2231">en BDD sur le CEJ.</text><path d="M269,222.2891 L269,262.2891 L643,262.2891 L643,232.2891 L633,222.2891 L269,222.2891 " fill="#FBFB77" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M633,222.2891 L633,232.2891 L643,232.2891 L633,222.2891 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="275" y="239.356">Le conseiller modifie l'email du Jeune sur i-milo.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="275" y="254.4888">La modification n'est pas répercutée sur la BDD du CEJ.</text><path d="M10,278.5547 L344,278.5547 L344,285.5547 L334,295.5547 L10,295.5547 L10,278.5547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="300.5938" style="stroke:#000000;stroke-width:2.0;" width="845" x="10" y="278.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="289" x="25" y="291.6216">Première connexion du Jeune sur le CEJ</text><polygon fill="#A80036" points="469,312.8203,459,316.8203,469,320.8203,465,316.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="463" x2="772.5" y1="316.8203" y2="316.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="481.75" y="311.7544">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="494.75" y="311.7544">Demande de connexion sur l'application</text><polygon fill="#A80036" points="300,341.9531,290,345.9531,300,349.9531,296,345.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="294" x2="457" y1="345.9531" y2="345.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="301" y="340.8872">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="314" y="340.8872">Redirection SSO Milo</text><polygon fill="#A80036" points="300,371.0859,290,375.0859,300,379.0859,296,375.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="294" x2="772.5" y1="375.0859" y2="375.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="479.75" y="370.02">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="492.75" y="370.02">ID + MDP Milo</text><polygon fill="#A80036" points="665,427.918,675,431.918,665,435.918,669,431.918" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="671" y1="431.918" y2="431.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="341" y="419.2856">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="409" y="411.7192">Authentification SSO Milo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="354" y="426.8521">Nouvelle session keycloak CEJ : infos Jeune</text><path d="M20,388.0859 L20,443.0859 L280,443.0859 L280,398.0859 L270,388.0859 L20,388.0859 " fill="#FBFB77" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M270,388.0859 L270,398.0859 L280,398.0859 L270,388.0859 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="26" y="405.1528">Ici, les infos Jeune envoyées sont les</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="26" y="420.2856">dernières à jour de i-milo, pour</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="26" y="435.4185">un changement d'email par exemple.</text><polygon fill="#A80036" points="469,489.75,459,493.75,469,497.75,465,493.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="463" x2="676" y1="493.75" y2="493.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="470" y="488.6841">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="483" y="488.6841">Authent OK : infos utilisateur</text><path d="M158,457.4844 L158,512.4844 L449,512.4844 L449,467.4844 L439,457.4844 L158,457.4844 " fill="#FFCCCB" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M439,457.4844 L439,467.4844 L449,467.4844 L439,457.4844 " fill="#FFCCCB" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="164" y="474.5513">Bien que l'on ait récupéré le nouvel email,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="164" y="489.6841">nous ne répercutons pas les modifications</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="164" y="504.8169">pour une première connexion.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="458" x2="500" y1="558.1484" y2="558.1484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="500" x2="500" y1="558.1484" y2="571.1484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459" x2="500" y1="571.1484" y2="571.1484"/><polygon fill="#A80036" points="469,567.1484,459,571.1484,469,575.1484,465,571.1484" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="465" y="545.5161">6</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="478" y="537.9497">Get Jeune by Email</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="482" y="553.0825"/><path d="M610,528.3828 L610,568.3828 L836,568.3828 L836,538.3828 L826,528.3828 L610,528.3828 " fill="#FFCCCB" filter="url(#f4d6na63q1j55)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M826,528.3828 L826,538.3828 L836,538.3828 L826,528.3828 " fill="#FFCCCB" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="616" y="545.4497">On ne retrouve pas le Jeune car</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="616" y="560.5825">l'ancien email sert de référence.</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="64" x="801" y="14.2822">Page Header</text><!--MD5=[5464baf56b4910e7e0c4a6bcfe8ed404]
@startuml

skinparam backgroundColor white

actor "Conseiller ML" as conseiller
participant "Keycloak i-Milo" as kckMilo 	#CBC3E3
participant "CEJ" as cej #ADD8E6
participant "Keycloak CEJ" as kckCej #ADD8E6
actor "Jeune ML" as jeune

header Page Header

title Erreur d'email sur la Première Connexion du Jeune Milo au CEJ

autonumber

note over cej  : Le conseiller a créé le compte du Jeune\navec un premier email. Celui-ci est enregistré\nen BDD sur le CEJ.
note over cej : Le conseiller modifie l'email du Jeune sur i-milo.\nLa modification n'est pas répercutée sur la BDD du CEJ.

group Première connexion du Jeune sur le CEJ
skinparam sequenceMessageAlign center
jeune -> cej : Demande de connexion sur l'application
cej -> kckMilo : Redirection SSO Milo
jeune -> kckMilo : ID + MDP Milo
kckMilo -> kckCej : Authentification SSO Milo\nNouvelle session keycloak CEJ : infos Jeune
note left : Ici, les infos Jeune envoyées sont les\ndernières à jour de i-milo, pour\nun changement d'email par exemple.
kckCej -> cej : Authent OK : infos utilisateur
note left #ffcccb : Bien que l'on ait récupéré le nouvel email,\nnous ne répercutons pas les modifications\npour une première connexion.
cej -> cej : <color:red>Get Jeune by Email\n
note right #ffcccb : On ne retrouve pas le Jeune car\nl'ancien email sert de référence.

end
@enduml

PlantUML version 1.2021.11(Sat Oct 02 13:26:11 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>